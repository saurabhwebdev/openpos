<UserControl x:Class="MyWinFormsApp.Views.RolesAccessView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">

    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <StackPanel Margin="40,32,40,40">

            <!-- Page Title -->
            <TextBlock Text="Roles &amp; Access"
                       Style="{StaticResource MaterialDesignHeadline4TextBlock}"
                       Margin="0,0,0,4"/>
            <TextBlock Text="Manage team members and module permissions for this shop"
                       Style="{StaticResource MaterialDesignBody1TextBlock}"
                       Opacity="0.5" Margin="0,0,0,32"/>

            <!-- CARD 1: Team Members -->
            <materialDesign:Card Padding="24" UniformCornerRadius="12" Margin="0,0,0,16">
                <StackPanel>
                    <DockPanel Margin="0,0,0,16">
                        <StackPanel Orientation="Horizontal" DockPanel.Dock="Left">
                            <materialDesign:PackIcon Kind="AccountGroupOutline" Width="20" Height="20"
                                                      VerticalAlignment="Center" Margin="0,0,10,0" Opacity="0.7"/>
                            <TextBlock Text="Team Members"
                                       Style="{StaticResource MaterialDesignSubtitle1TextBlock}"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                        <Button Style="{StaticResource MaterialDesignFlatButton}"
                                HorizontalAlignment="Right" Click="BtnInviteUser_Click">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="AccountPlus" VerticalAlignment="Center" Margin="0,0,4,0"/>
                                <TextBlock Text="Invite User" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </DockPanel>

                    <ItemsControl x:Name="MembersList">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border BorderBrush="{DynamicResource MaterialDesignDivider}"
                                        BorderThickness="0,0,0,1" Padding="8,12">
                                    <DockPanel>
                                        <Border Width="36" Height="36" CornerRadius="18"
                                                Background="{DynamicResource PrimaryHueLightBrush}"
                                                DockPanel.Dock="Left" Margin="0,0,12,0">
                                            <materialDesign:PackIcon Kind="AccountCircle" Width="20" Height="20"
                                                                      HorizontalAlignment="Center" VerticalAlignment="Center"
                                                                      Foreground="{DynamicResource PrimaryHueMidBrush}"/>
                                        </Border>

                                        <Button Style="{StaticResource MaterialDesignIconForegroundButton}"
                                                ToolTip="Remove from shop"
                                                Tag="{Binding UserTenantId}"
                                                Click="BtnRemoveMember_Click"
                                                DockPanel.Dock="Right" VerticalAlignment="Center"
                                                Opacity="0.5" Margin="8,0,0,0">
                                            <materialDesign:PackIcon Kind="AccountRemoveOutline" Width="18" Height="18"/>
                                        </Button>

                                        <StackPanel VerticalAlignment="Center">
                                            <DockPanel>
                                                <TextBlock Text="{Binding FullName}" FontSize="14" FontWeight="Medium"
                                                           DockPanel.Dock="Left"/>
                                                <TextBlock Text="{Binding RoleName}" FontSize="12" Opacity="0.5"
                                                           DockPanel.Dock="Right" HorizontalAlignment="Right"
                                                           VerticalAlignment="Center" Margin="12,0,0,0"/>
                                            </DockPanel>
                                            <TextBlock Text="{Binding Email}" FontSize="12" Opacity="0.5"/>
                                        </StackPanel>
                                    </DockPanel>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>

                    <ProgressBar x:Name="ProgressMembers"
                                 Style="{StaticResource MaterialDesignCircularProgressBar}"
                                 IsIndeterminate="True" Visibility="Collapsed"
                                 HorizontalAlignment="Center" Margin="0,12,0,0"
                                 Width="24" Height="24"/>

                    <TextBlock x:Name="TxtMembersMessage" FontSize="12"
                               TextWrapping="Wrap" Margin="0,12,0,0"
                               Visibility="Collapsed"/>
                </StackPanel>
            </materialDesign:Card>

            <!-- CARD 2: Module Access Matrix -->
            <materialDesign:Card Padding="24" UniformCornerRadius="12" Margin="0,0,0,16">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <materialDesign:PackIcon Kind="ShieldLockOutline" Width="20" Height="20"
                                                  VerticalAlignment="Center" Margin="0,0,10,0" Opacity="0.7"/>
                        <TextBlock Text="Module Access"
                                   Style="{StaticResource MaterialDesignSubtitle1TextBlock}"
                                   VerticalAlignment="Center"/>
                    </StackPanel>

                    <TextBlock Text="Configure which roles can access each app module in this shop."
                               Style="{StaticResource MaterialDesignBody2TextBlock}"
                               Opacity="0.5" Margin="0,0,0,16"/>

                    <Grid x:Name="PermissionGrid"/>

                    <ProgressBar x:Name="ProgressPermissions"
                                 Style="{StaticResource MaterialDesignCircularProgressBar}"
                                 IsIndeterminate="True" Visibility="Collapsed"
                                 HorizontalAlignment="Center" Margin="0,12,0,0"
                                 Width="24" Height="24"/>

                    <TextBlock x:Name="TxtPermissionsMessage" FontSize="12"
                               TextWrapping="Wrap" Margin="0,12,0,0"
                               Visibility="Collapsed"/>
                </StackPanel>
            </materialDesign:Card>

            <!-- CARD 3: Invite User (hidden by default) -->
            <materialDesign:Card x:Name="InviteCard" Padding="24" UniformCornerRadius="12"
                                 Visibility="Collapsed">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                        <materialDesign:PackIcon Kind="AccountPlusOutline" Width="20" Height="20"
                                                  VerticalAlignment="Center" Margin="0,0,10,0" Opacity="0.7"/>
                        <TextBlock Text="Invite User to Shop"
                                   Style="{StaticResource MaterialDesignSubtitle1TextBlock}"/>
                    </StackPanel>

                    <TextBox x:Name="TxtInviteEmail"
                             Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             materialDesign:HintAssist.Hint="User Email"
                             FontSize="14" Margin="0,0,0,12"/>

                    <ComboBox x:Name="CmbInviteRole"
                              Style="{StaticResource MaterialDesignOutlinedComboBox}"
                              materialDesign:HintAssist.Hint="Assign Role"
                              FontSize="14" Margin="0,0,0,16"
                              DisplayMemberPath="Name"
                              SelectedValuePath="Id"/>

                    <StackPanel Orientation="Horizontal">
                        <Button x:Name="BtnSendInvite"
                                Style="{StaticResource MaterialDesignRaisedButton}"
                                Click="BtnSendInvite_Click" Margin="0,0,12,0">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Send" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                <TextBlock Text="ADD USER" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        <Button Content="CANCEL"
                                Style="{StaticResource MaterialDesignFlatButton}"
                                Click="BtnCancelInvite_Click"/>
                        <ProgressBar x:Name="ProgressInvite"
                                     Style="{StaticResource MaterialDesignCircularProgressBar}"
                                     IsIndeterminate="True" Visibility="Collapsed"
                                     VerticalAlignment="Center" Width="24" Height="24"
                                     Margin="12,0,0,0"/>
                    </StackPanel>

                    <TextBlock x:Name="TxtInviteMessage" FontSize="12"
                               TextWrapping="Wrap" Margin="0,12,0,0"
                               Visibility="Collapsed"/>
                </StackPanel>
            </materialDesign:Card>
        </StackPanel>
    </ScrollViewer>
</UserControl>
