<UserControl x:Class="MyWinFormsApp.Views.PosView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">

    <UserControl.Resources>
        <SolidColorBrush x:Key="AccentGreen" Color="#10B981"/>
        <SolidColorBrush x:Key="AccentRed" Color="#EF4444"/>
        <SolidColorBrush x:Key="AccentAmber" Color="#F59E0B"/>
        <SolidColorBrush x:Key="Purple" Color="#7C4DFF"/>

        <!-- Product row hover -->
        <Style x:Key="ProductRowBorder" TargetType="Border">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Padding" Value="16,9"/>
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
            <Setter Property="BorderBrush" Value="#0A000000"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#F5F3FF"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Discount toggle radio -->
        <Style x:Key="DiscountToggleRadio" TargetType="RadioButton">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border x:Name="Bd" CornerRadius="4" Padding="8,3"
                                Background="Transparent" Cursor="Hand"
                                MinWidth="32" HorizontalAlignment="Center">
                            <TextBlock x:Name="Tb"
                                       Text="{TemplateBinding Content}"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       FontSize="12"
                                       FontWeight="SemiBold"
                                       Foreground="#999"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="Bd" Property="Background" Value="#EDE7F6"/>
                                <Setter TargetName="Tb" Property="Foreground" Value="#7C4DFF"/>
                            </Trigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsMouseOver" Value="True"/>
                                    <Condition Property="IsChecked" Value="False"/>
                                </MultiTrigger.Conditions>
                                <Setter TargetName="Bd" Property="Background" Value="#F5F5F5"/>
                            </MultiTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Cart row -->
        <Style x:Key="CartRowBorder" TargetType="Border">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Padding" Value="14,9"/>
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
            <Setter Property="BorderBrush" Value="#08000000"/>
        </Style>

        <!-- Payment method radio -->
        <Style x:Key="PayMethodRadio" TargetType="RadioButton">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border x:Name="Bd" CornerRadius="8" Padding="8,8"
                                Background="Transparent" Cursor="Hand"
                                BorderBrush="#E0E0E0" BorderThickness="1.5">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="Bd" Property="Background" Value="#F3F0FF"/>
                                <Setter TargetName="Bd" Property="BorderBrush" Value="#7C4DFF"/>
                                <Setter TargetName="Bd" Property="BorderThickness" Value="2"/>
                            </Trigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsMouseOver" Value="True"/>
                                    <Condition Property="IsChecked" Value="False"/>
                                </MultiTrigger.Conditions>
                                <Setter TargetName="Bd" Property="Background" Value="#FAFAFA"/>
                                <Setter TargetName="Bd" Property="BorderBrush" Value="#BDBDBD"/>
                            </MultiTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="63*"/>
            <ColumnDefinition Width="37*"/>
        </Grid.ColumnDefinitions>

        <!-- ═══════════════════════════════════════════════════ -->
        <!-- LEFT: PRODUCT CATALOG                              -->
        <!-- ═══════════════════════════════════════════════════ -->
        <DockPanel Grid.Column="0" Margin="20,14,12,14">

            <!-- Search bar row -->
            <Grid DockPanel.Dock="Top" Margin="0,0,0,12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBox x:Name="TxtSearch" Grid.Column="0"
                         materialDesign:HintAssist.Hint="Search products by name, SKU or barcode..."
                         materialDesign:TextFieldAssist.HasLeadingIcon="True"
                         materialDesign:TextFieldAssist.LeadingIcon="Magnify"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                         FontSize="13" Padding="8,7"
                         materialDesign:HintAssist.FloatingOffset="0,-20"
                         TextChanged="TxtSearch_TextChanged"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="8,0,0,0"
                            VerticalAlignment="Center">
                    <Button Height="36" Width="36"
                            Style="{StaticResource MaterialDesignIconButton}"
                            ToolTip="Held Orders" Click="BtnHeldOrders_Click"
                            Margin="0,0,4,0">
                        <materialDesign:PackIcon Kind="PauseCircleOutline" Width="20" Height="20"
                                                  Foreground="{StaticResource AccentAmber}"/>
                    </Button>
                    <Button Height="36" Width="36"
                            Style="{StaticResource MaterialDesignIconButton}"
                            ToolTip="Sales History" Click="BtnHistory_Click">
                        <materialDesign:PackIcon Kind="History" Width="20" Height="20"
                                                  Foreground="{StaticResource Purple}"/>
                    </Button>
                </StackPanel>
            </Grid>

            <!-- Category pills -->
            <ScrollViewer DockPanel.Dock="Top"
                          HorizontalScrollBarVisibility="Auto"
                          VerticalScrollBarVisibility="Disabled"
                          Margin="0,0,0,12">
                <StackPanel x:Name="CategoryPanel" Orientation="Horizontal"/>
            </ScrollViewer>

            <!-- Product Table -->
            <Border CornerRadius="10" Background="{DynamicResource MaterialDesign.Brush.Card}">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="8" Opacity="0.04" ShadowDepth="2" Direction="270"/>
                </Border.Effect>
                <DockPanel>
                    <!-- Table header -->
                    <Border DockPanel.Dock="Top" Padding="16,10"
                            Background="#FAFAFA"
                            CornerRadius="10,10,0,0"
                            BorderBrush="#0A000000" BorderThickness="0,0,0,1">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="110"/>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="90"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="PRODUCT" FontSize="10.5" FontWeight="SemiBold"
                                       Foreground="#9E9E9E"/>
                            <TextBlock Grid.Column="1" Text="CATEGORY" FontSize="10.5" FontWeight="SemiBold"
                                       Foreground="#9E9E9E"/>
                            <TextBlock Grid.Column="2" Text="STOCK" FontSize="10.5" FontWeight="SemiBold"
                                       Foreground="#9E9E9E" HorizontalAlignment="Center"/>
                            <TextBlock Grid.Column="3" Text="PRICE" FontSize="10.5" FontWeight="SemiBold"
                                       Foreground="#9E9E9E" HorizontalAlignment="Right"/>
                        </Grid>
                    </Border>

                    <Grid>
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <ItemsControl x:Name="ProductGrid">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Style="{StaticResource ProductRowBorder}"
                                                MouseLeftButtonUp="ProductCard_Click"
                                                Tag="{Binding Id}">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="110"/>
                                                    <ColumnDefinition Width="80"/>
                                                    <ColumnDefinition Width="90"/>
                                                </Grid.ColumnDefinitions>

                                                <!-- Product name + SKU -->
                                                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                                    <TextBlock Text="{Binding Name}" FontWeight="SemiBold" FontSize="12.5"
                                                               TextTrimming="CharacterEllipsis"/>
                                                    <TextBlock Text="{Binding Sku}" FontSize="10" Foreground="#BDBDBD"
                                                               Margin="0,1,0,0"/>
                                                </StackPanel>

                                                <!-- Category -->
                                                <TextBlock Grid.Column="1" Text="{Binding CategoryName}" FontSize="11.5"
                                                           Foreground="#9E9E9E" VerticalAlignment="Center"
                                                           TextTrimming="CharacterEllipsis"/>

                                                <!-- Stock badge -->
                                                <Border Grid.Column="2" HorizontalAlignment="Center" VerticalAlignment="Center"
                                                        CornerRadius="10" Padding="8,3">
                                                    <Border.Style>
                                                        <Style TargetType="Border">
                                                            <Setter Property="Background" Value="#E8F5E9"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding IsLowStock}" Value="True">
                                                                    <Setter Property="Background" Value="#FEF2F2"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Border.Style>
                                                    <TextBlock Text="{Binding StockDisplay}" FontSize="10" FontWeight="Medium">
                                                        <TextBlock.Style>
                                                            <Style TargetType="TextBlock">
                                                                <Setter Property="Foreground" Value="#2E7D32"/>
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding IsLowStock}" Value="True">
                                                                        <Setter Property="Foreground" Value="#DC2626"/>
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </TextBlock.Style>
                                                    </TextBlock>
                                                </Border>

                                                <!-- Price -->
                                                <TextBlock Grid.Column="3" FontSize="13" FontWeight="Bold"
                                                           VerticalAlignment="Center" HorizontalAlignment="Right"
                                                           Foreground="{StaticResource Purple}">
                                                    <Run Text="&#x20B9;"/><Run Text="{Binding SellingPrice, StringFormat=\{0:N2\}}"/>
                                                </TextBlock>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>

                        <!-- Loading -->
                        <ProgressBar x:Name="ProgressLoad"
                                     Style="{StaticResource MaterialDesignCircularProgressBar}"
                                     IsIndeterminate="True" Visibility="Collapsed"
                                     HorizontalAlignment="Center" VerticalAlignment="Center"
                                     Width="40" Height="40"/>

                        <!-- Empty -->
                        <StackPanel x:Name="TxtEmpty" Visibility="Collapsed"
                                    HorizontalAlignment="Center" VerticalAlignment="Center">
                            <materialDesign:PackIcon Kind="PackageVariantRemove"
                                                      Width="44" Height="44" Opacity="0.12"
                                                      HorizontalAlignment="Center"/>
                            <TextBlock Text="No products found" FontSize="13" Opacity="0.25"
                                       HorizontalAlignment="Center" Margin="0,8,0,0"/>
                        </StackPanel>
                    </Grid>
                </DockPanel>
            </Border>
        </DockPanel>

        <!-- ═══════════════════════════════════════════════════ -->
        <!-- RIGHT: CART + CHECKOUT                             -->
        <!-- ═══════════════════════════════════════════════════ -->
        <Border Grid.Column="1"
                Background="{DynamicResource MaterialDesign.Brush.Card}"
                BorderBrush="#0A000000" BorderThickness="1,0,0,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- ── Cart Header ── -->
                <Border Grid.Row="0" Padding="16,12,16,10"
                        BorderBrush="#08000000" BorderThickness="0,0,0,1">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Title row -->
                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,8">
                            <Border Background="#7C4DFF" CornerRadius="6" Padding="10,5">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="CartOutline" Width="15" Height="15"
                                                              Foreground="White" VerticalAlignment="Center"
                                                              Margin="0,0,6,0"/>
                                    <TextBlock Text="Cart" FontSize="13" FontWeight="SemiBold"
                                               Foreground="White" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                            <TextBlock x:Name="TxtCartCount" FontSize="12" Foreground="#BDBDBD"
                                       VerticalAlignment="Center" Margin="10,0,0,0" FontWeight="Medium"/>
                        </StackPanel>

                        <!-- Customer input -->
                        <TextBox x:Name="TxtCustomerName" Grid.Row="1"
                                 materialDesign:HintAssist.Hint="Customer name (optional)"
                                 materialDesign:TextFieldAssist.HasLeadingIcon="True"
                                 materialDesign:TextFieldAssist.LeadingIcon="AccountOutline"
                                 Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                 FontSize="12" Padding="6,4"
                                 materialDesign:HintAssist.FloatingOffset="0,-18"/>
                    </Grid>
                </Border>

                <!-- ── Cart Items ── -->
                <Grid Grid.Row="1">
                    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="0">
                        <ItemsControl x:Name="CartList" Margin="2,0">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Style="{StaticResource CartRowBorder}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>

                                            <TextBlock Grid.Column="0" Text="{Binding Product.Name}"
                                                       FontWeight="Medium" FontSize="12.5"
                                                       TextTrimming="CharacterEllipsis"
                                                       VerticalAlignment="Center"
                                                       Margin="0,0,8,0"/>

                                            <!-- Qty controls -->
                                            <Border Grid.Column="1" CornerRadius="6"
                                                    Background="#F5F5F5"
                                                    VerticalAlignment="Center"
                                                    Margin="0,0,10,0" Padding="1">
                                                <StackPanel Orientation="Horizontal">
                                                    <Button Width="26" Height="26" Padding="0"
                                                            Click="BtnDecreaseQty_Click" Tag="{Binding}"
                                                            FontSize="13" Content="-"
                                                            materialDesign:ButtonAssist.CornerRadius="5"
                                                            Style="{StaticResource MaterialDesignFlatButton}"/>
                                                    <TextBlock Text="{Binding FormattedQuantity}" FontSize="12.5"
                                                               FontWeight="Bold"
                                                               VerticalAlignment="Center" Margin="5,0"
                                                               MinWidth="18" TextAlignment="Center"/>
                                                    <Button Width="26" Height="26" Padding="0"
                                                            Click="BtnIncreaseQty_Click" Tag="{Binding}"
                                                            FontSize="13" Content="+"
                                                            materialDesign:ButtonAssist.CornerRadius="5"
                                                            Style="{StaticResource MaterialDesignFlatButton}"/>
                                                </StackPanel>
                                            </Border>

                                            <!-- Price + Remove -->
                                            <StackPanel Grid.Column="2" Orientation="Horizontal"
                                                        VerticalAlignment="Center">
                                                <StackPanel VerticalAlignment="Center" Margin="0,0,2,0">
                                                    <TextBlock Text="{Binding FormattedLineTotal}" FontWeight="Bold"
                                                               FontSize="12.5" HorizontalAlignment="Right"
                                                               Foreground="{StaticResource Purple}"/>
                                                    <TextBlock Text="{Binding FormattedUnitPrice}" FontSize="9.5"
                                                               Foreground="#BDBDBD" HorizontalAlignment="Right"/>
                                                </StackPanel>
                                                <Button Style="{StaticResource MaterialDesignToolForegroundButton}"
                                                        Width="22" Height="22" Padding="0"
                                                        Click="BtnRemoveItem_Click"
                                                        Tag="{Binding}" ToolTip="Remove">
                                                    <materialDesign:PackIcon Kind="Close" Width="13" Height="13"
                                                                              Foreground="#BDBDBD"/>
                                                </Button>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>

                    <!-- Empty cart -->
                    <StackPanel x:Name="TxtCartEmpty" Visibility="Visible"
                                HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Border Background="#F5F5F5" CornerRadius="40" Width="64" Height="64"
                                HorizontalAlignment="Center" Margin="0,0,0,8">
                            <materialDesign:PackIcon Kind="CartOff" Width="28" Height="28"
                                                      Foreground="#BDBDBD" HorizontalAlignment="Center"
                                                      VerticalAlignment="Center"/>
                        </Border>
                        <TextBlock Text="Cart is empty" FontSize="13" Foreground="#BDBDBD"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="Click products to add them" FontSize="11" Foreground="#E0E0E0"
                                   HorizontalAlignment="Center" Margin="0,3,0,0"/>
                    </StackPanel>
                </Grid>

                <!-- ── Checkout Panel ── -->
                <Border Grid.Row="2" BorderBrush="#0A000000" BorderThickness="0,1,0,0">
                    <StackPanel Margin="16,10,16,12">

                        <!-- Subtotal -->
                        <Grid Margin="0,0,0,3">
                            <TextBlock Text="Subtotal" FontSize="12" Foreground="#9E9E9E" VerticalAlignment="Center"/>
                            <TextBlock x:Name="TxtSubtotal" Text="&#x20B9;0.00" FontSize="12"
                                       FontWeight="Medium" HorizontalAlignment="Right"/>
                        </Grid>

                        <!-- Discount -->
                        <Grid Margin="0,0,0,3">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="6"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="Discount" FontSize="12" Foreground="#9E9E9E"
                                       VerticalAlignment="Center"/>

                            <Border Grid.Column="2" CornerRadius="4"
                                    BorderBrush="#E0E0E0" BorderThickness="1" VerticalAlignment="Center">
                                <StackPanel Orientation="Horizontal">
                                    <RadioButton x:Name="RbDiscountFixed" Content="&#x20B9;"
                                                 GroupName="DiscountType" IsChecked="True"
                                                 Style="{StaticResource DiscountToggleRadio}"
                                                 Checked="DiscountType_Changed"/>
                                    <RadioButton x:Name="RbDiscountPercent" Content="%"
                                                 GroupName="DiscountType"
                                                 Style="{StaticResource DiscountToggleRadio}"
                                                 Checked="DiscountType_Changed"/>
                                </StackPanel>
                            </Border>

                            <TextBox x:Name="TxtDiscountValue" Grid.Column="4" Text="0"
                                     Width="60" FontSize="12" TextAlignment="Right"
                                     Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                     Padding="4,3"
                                     materialDesign:TextFieldAssist.DecorationVisibility="Hidden"
                                     TextChanged="Discount_Changed"/>
                        </Grid>

                        <!-- Tax breakdown -->
                        <ItemsControl x:Name="TaxBreakdownList" Margin="0,0,0,1">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Grid Margin="0,0,0,1">
                                        <TextBlock FontSize="10.5" Foreground="#BDBDBD">
                                            <Run Text="  "/><Run Text="{Binding TaxName}"/>
                                        </TextBlock>
                                        <TextBlock Text="{Binding FormattedAmount}" FontSize="10.5"
                                                   Foreground="#BDBDBD" HorizontalAlignment="Right"/>
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <!-- Divider -->
                        <Border Height="1" Background="#E0E0E0" Margin="0,6,0,6"/>

                        <!-- Grand Total -->
                        <Grid Margin="0,0,0,10">
                            <TextBlock Text="TOTAL" FontSize="13" FontWeight="Bold" Foreground="#9E9E9E"
                                       VerticalAlignment="Center"/>
                            <TextBlock x:Name="TxtGrandTotal" Text="&#x20B9;0.00" FontSize="22" FontWeight="Bold"
                                       HorizontalAlignment="Right" Foreground="#7C4DFF"/>
                        </Grid>

                        <!-- Payment Methods -->
                        <Grid Margin="0,0,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="6"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="6"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <RadioButton x:Name="RbCash" Grid.Column="0" IsChecked="True"
                                         GroupName="PayMethod" Checked="PaymentMethod_Changed"
                                         Style="{StaticResource PayMethodRadio}">
                                <StackPanel HorizontalAlignment="Center">
                                    <materialDesign:PackIcon Kind="Cash" Width="18" Height="18"
                                                              HorizontalAlignment="Center" Margin="0,0,0,2"
                                                              Foreground="#43A047"/>
                                    <TextBlock Text="Cash" FontSize="10.5" FontWeight="Medium"
                                               HorizontalAlignment="Center" Foreground="#666"/>
                                </StackPanel>
                            </RadioButton>

                            <RadioButton x:Name="RbUpi" Grid.Column="2"
                                         GroupName="PayMethod" Checked="PaymentMethod_Changed"
                                         Style="{StaticResource PayMethodRadio}">
                                <StackPanel HorizontalAlignment="Center">
                                    <materialDesign:PackIcon Kind="Cellphone" Width="18" Height="18"
                                                              HorizontalAlignment="Center" Margin="0,0,0,2"
                                                              Foreground="#7C4DFF"/>
                                    <TextBlock Text="UPI" FontSize="10.5" FontWeight="Medium"
                                               HorizontalAlignment="Center" Foreground="#666"/>
                                </StackPanel>
                            </RadioButton>

                            <RadioButton x:Name="RbCard" Grid.Column="4"
                                         GroupName="PayMethod" Checked="PaymentMethod_Changed"
                                         Style="{StaticResource PayMethodRadio}">
                                <StackPanel HorizontalAlignment="Center">
                                    <materialDesign:PackIcon Kind="CreditCardOutline" Width="18" Height="18"
                                                              HorizontalAlignment="Center" Margin="0,0,0,2"
                                                              Foreground="#1565C0"/>
                                    <TextBlock Text="Card" FontSize="10.5" FontWeight="Medium"
                                               HorizontalAlignment="Center" Foreground="#666"/>
                                </StackPanel>
                            </RadioButton>
                        </Grid>

                        <!-- UPI QR Panel -->
                        <Border x:Name="UpiPanel" Visibility="Collapsed"
                                CornerRadius="8" Margin="0,0,0,6" Padding="10"
                                Background="#F8F5FF" BorderBrush="#E0D5F5" BorderThickness="1">
                            <StackPanel HorizontalAlignment="Center">
                                <TextBlock Text="Scan to Pay via UPI" FontSize="10.5" FontWeight="SemiBold"
                                           HorizontalAlignment="Center" Foreground="#7C4DFF" Margin="0,0,0,6"/>
                                <Border x:Name="QrCodeContainer" Background="White" CornerRadius="6"
                                        Padding="6" HorizontalAlignment="Center" Margin="0,0,0,6">
                                    <Image x:Name="ImgQrCode" Width="120" Height="120"
                                           RenderOptions.BitmapScalingMode="NearestNeighbor"/>
                                </Border>
                                <TextBlock x:Name="TxtUpiId" FontSize="9.5" Foreground="#BDBDBD"
                                           HorizontalAlignment="Center" TextWrapping="Wrap"/>
                                <TextBlock x:Name="TxtUpiAmount" FontSize="12" FontWeight="Bold"
                                           HorizontalAlignment="Center" Foreground="#7C4DFF" Margin="0,2,0,0"/>
                            </StackPanel>
                        </Border>

                        <!-- Card Panel -->
                        <Border x:Name="CardPanel" Visibility="Collapsed"
                                CornerRadius="8" Margin="0,0,0,6" Padding="10"
                                Background="#F5F8FF" BorderBrush="#D5E2F5" BorderThickness="1">
                            <StackPanel>
                                <TextBlock x:Name="TxtCardGateway" FontSize="10.5" FontWeight="SemiBold"
                                           HorizontalAlignment="Center" Foreground="#1565C0"/>
                                <TextBlock x:Name="TxtCardGatewayInfo" FontSize="9.5" Foreground="#BDBDBD"
                                           HorizontalAlignment="Center" Margin="0,2,0,0"/>
                            </StackPanel>
                        </Border>

                        <!-- Cash tendered / change -->
                        <StackPanel x:Name="CashPanel">
                            <Grid Margin="0,0,0,4">
                                <TextBlock Text="Tendered" FontSize="12" Foreground="#9E9E9E" VerticalAlignment="Center"/>
                                <TextBox x:Name="TxtAmountTendered" Width="90" HorizontalAlignment="Right"
                                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                         Padding="5,3" FontSize="12" TextAlignment="Right"
                                         materialDesign:HintAssist.Hint="0.00"
                                         TextChanged="AmountTendered_Changed"/>
                            </Grid>
                            <Grid Margin="0,0,0,4">
                                <TextBlock Text="Change" FontSize="12" Foreground="#9E9E9E" VerticalAlignment="Center"/>
                                <TextBlock x:Name="TxtChange" Text="&#x20B9;0.00" FontSize="13" FontWeight="Bold"
                                           HorizontalAlignment="Right" Foreground="{StaticResource AccentGreen}"/>
                            </Grid>
                        </StackPanel>

                        <!-- CHARGE button -->
                        <Button x:Name="BtnCharge" Click="BtnCharge_Click"
                                Height="44" FontSize="14" FontWeight="Bold"
                                Margin="0,4,0,6"
                                materialDesign:ButtonAssist.CornerRadius="8"
                                HorizontalContentAlignment="Center">
                            <Button.Style>
                                <Style TargetType="Button" BasedOn="{StaticResource MaterialDesignRaisedButton}">
                                    <Setter Property="Background" Value="#10B981"/>
                                    <Setter Property="Foreground" Value="White"/>
                                    <Setter Property="BorderBrush" Value="#10B981"/>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#059669"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="CashRegister" Width="18" Height="18"
                                                          VerticalAlignment="Center" Margin="0,0,8,0"/>
                                <TextBlock x:Name="TxtChargeAmount" Text="CHARGE  &#x20B9;0.00"
                                           VerticalAlignment="Center" FontWeight="Bold"/>
                            </StackPanel>
                        </Button>

                        <!-- Hold / Clear -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="6"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Button Grid.Column="0" Height="32" FontSize="10.5"
                                    materialDesign:ButtonAssist.CornerRadius="6"
                                    Click="BtnHold_Click">
                                <Button.Style>
                                    <Style TargetType="Button" BasedOn="{StaticResource MaterialDesignOutlinedButton}">
                                        <Setter Property="BorderBrush" Value="{StaticResource AccentAmber}"/>
                                        <Setter Property="Foreground" Value="{StaticResource AccentAmber}"/>
                                    </Style>
                                </Button.Style>
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="PauseCircle" Width="14" Height="14"
                                                              VerticalAlignment="Center" Margin="0,0,4,0"/>
                                    <TextBlock Text="Hold" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>
                            <Button Grid.Column="2" Height="32" FontSize="10.5"
                                    materialDesign:ButtonAssist.CornerRadius="6"
                                    Click="BtnClear_Click">
                                <Button.Style>
                                    <Style TargetType="Button" BasedOn="{StaticResource MaterialDesignOutlinedButton}">
                                        <Setter Property="BorderBrush" Value="{StaticResource AccentRed}"/>
                                        <Setter Property="Foreground" Value="{StaticResource AccentRed}"/>
                                    </Style>
                                </Button.Style>
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="DeleteOutline" Width="14" Height="14"
                                                              VerticalAlignment="Center" Margin="0,0,4,0"/>
                                    <TextBlock Text="Clear" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>
                        </Grid>

                        <ProgressBar x:Name="ProgressCharge"
                                     Style="{StaticResource MaterialDesignCircularProgressBar}"
                                     IsIndeterminate="True" Visibility="Collapsed"
                                     HorizontalAlignment="Center" Width="24" Height="24" Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>
    </Grid>
</UserControl>
